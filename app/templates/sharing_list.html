{% extends "home_base.html" %}

{% block title %}DailyBite - Sharing List{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='style_dashboard.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='style_sharing_list.css') }}">
{% endblock %}

{% block content %}
<h1 class="sharing-list-title">Sharing List</h1>

<div class="sharing-list-container">
    {% if shares %}
    {% for share in shares %}
    <!-- V：让整个 .sharing-item 可点击 查看详情 -->
    <a href="{{ url_for('main.view_share', share_id=share.id) }}"
        class="sharing-item-link {% if not share.is_read %}unread{% endif %}">
        <div class="sharing-item">
            <div class="sharing-avatar">
                <i class="fa-solid fa-user fa-lg"></i>
            </div>
            <div class="sharing-content">
                <div class="sharing-user">{{ share.sender.first_name }} {{ share.sender.last_name }}</div>
                <div class="sharing-text">
                    {% set dr = share.date_range %}
                    {% set ct = share.content_type %}
                    {% if dr == 'day' and ct == 'calorie' %}
                        shared with you today’s calorie intake.
                    {% elif dr == 'day' and ct == 'nutrition' %}
                        shared with you today’s nutrition intake.
                    {% elif dr == 'week' and ct == 'ranking' %}
                        shared with you this week’s ranking.
                    {% elif dr == 'week' and ct == 'calorie' %}
                        shared with you this week’s calorie intake.
                    {% elif dr == 'week' and ct == 'nutrition' %}
                        shared with you this week’s nutrition intake.
                    {% elif dr == 'month' and ct == 'ranking' %}
                        shared with you this month’s ranking.
                    {% elif dr == 'month' and ct == 'calorie' %}
                        shared with you this month’s calorie intake.
                    {% elif dr == 'month' and ct == 'nutrition' %}
                        shared with you this month’s nutrition intake.
                    {% else %}
                        shared some data with you.
                    {% endif %}
                </div>
            </div>
            <div class="sharing-time">{{ share.elapsed_time }}</div>
        </div>
    </a>
    {% endfor %}
    {% else %}
    <div class="no-shares">
        <p class="text-muted text-center my-5">No shared content yet.</p>
    </div>
    {% endif %}
</div>
{% endblock %}